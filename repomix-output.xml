This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
api/
  index.php
assets/
  js/
    core.js
    router.js
db/
  schema/
    schema.sql
includes/
  utils.php
pages/
  js/
    home.js
  about.html
  browse.html
  contact.html
  faq.html
  home.html
  privacy.html
  terms.html
.gitignore
.htaccess
.repomixignore
404.html
500.html
bootstrap.php
db.md
deploy.php
index.php
input.css
postcss.config.js
project.md
README.md
STRUCTURE.md
tailwind.config.js
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="api/index.php">
<?php
// API endpoint handler
require_once __DIR__ . '/../bootstrap.php';
require_once __DIR__ . '/../includes/utils.php';

// Start session for CSRF
session_start();

// Set JSON header by default
header('Content-Type: application/json');

// Handle CORS if needed (configure for your domain)
header('Access-Control-Allow-Origin: *');
header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE');
header('Access-Control-Allow-Headers: Content-Type');

// Get request method and endpoint
$method = $_SERVER['REQUEST_METHOD'];
$endpoint = $_GET['endpoint'] ?? '';

// Route to appropriate handler
try {
    switch ($endpoint) {
        case 'genres':
            handleGenres($method);
            break;
            
        case 'search':
            handleSearch($method);
            break;
            
        case 'stats':
            handleStats($method);
            break;
            
        default:
            jsonResponse(['error' => 'Invalid endpoint'], 404);
    }
} catch (Exception $e) {
    error_log("API Error: " . $e->getMessage());
    jsonResponse(['error' => 'Internal server error'], 500);
}

/**
 * Handle genre-related requests
 */
function handleGenres($method) {
    if ($method !== 'GET') {
        jsonResponse(['error' => 'Method not allowed'], 405);
    }
    
    $db = getDB();
    $stmt = $db->query("SELECT id, name FROM Tags WHERE is_genre = 1 ORDER BY name");
    $genres = $stmt->fetchAll();
    
    jsonResponse(['genres' => $genres]);
}

/**
 * Handle search requests
 */
function handleSearch($method) {
    if ($method !== 'GET') {
        jsonResponse(['error' => 'Method not allowed'], 405);
    }
    
    $query = $_GET['q'] ?? '';
    if (strlen($query) < 3) {
        jsonResponse(['results' => []]);
    }
    
    // TODO: Implement actual search
    jsonResponse(['results' => [], 'query' => $query]);
}

/**
 * Handle stats requests
 */
function handleStats($method) {
    if ($method !== 'GET') {
        jsonResponse(['error' => 'Method not allowed'], 405);
    }
    
    $db = getDB();
    
    // Get basic stats
    $stats = [
        'total_media' => $db->query("SELECT COUNT(*) FROM Media")->fetchColumn(),
        'total_branches' => $db->query("SELECT COUNT(*) FROM Branches")->fetchColumn(),
        'total_users' => $db->query("SELECT COUNT(*) FROM Users")->fetchColumn(),
        'recent_activity' => []
    ];
    
    jsonResponse(['stats' => $stats]);
}
</file>

<file path="assets/js/core.js">
// Core functionality for ContinueThe.Quest
const CTQ = {
    // Initialize core functionality
    init() {
        this.setupMenuToggle();
        this.setupThemeToggle();
        this.loadGenres();
    },

    // Mobile menu toggle
    setupMenuToggle() {
        const toggle = document.getElementById('menu-toggle');
        const close = document.getElementById('menu-close');
        const menu = document.getElementById('mobile-menu');
        const overlay = document.getElementById('menu-overlay');
        
        toggle?.addEventListener('click', () => {
            menu.classList.remove('-translate-x-full');
            overlay.classList.remove('hidden');
        });
        
        close?.addEventListener('click', () => {
            menu.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
        });
        
        overlay?.addEventListener('click', () => {
            menu.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
        });
    },

    // Theme toggle functionality
    setupThemeToggle() {
        const toggle = document.getElementById('theme-toggle');
        const root = document.documentElement;
        const themeIcon = toggle?.querySelector('svg');

        // Apply saved theme on load
        const savedTheme = localStorage.getItem('ctq-theme') || 'dark';
        
        // Set the initial state based on saved preference
        if (savedTheme === 'light') {
            root.classList.remove('dark');
            document.body.classList.add('light-theme');
            document.body.classList.remove('dark-theme');
            this.updateThemeIcon(themeIcon, 'light');
        } else {
            root.classList.add('dark');
            document.body.classList.add('dark-theme');
            document.body.classList.remove('light-theme');
            this.updateThemeIcon(themeIcon, 'dark');
        }

        toggle?.addEventListener('click', () => {
            if (root.classList.contains('dark')) {
                // Switch to light mode
                root.classList.remove('dark');
                document.body.classList.add('light-theme');
                document.body.classList.remove('dark-theme');
                localStorage.setItem('ctq-theme', 'light');
                this.updateThemeIcon(themeIcon, 'light');
                console.log('Switched to light theme');
            } else {
                // Switch to dark mode
                root.classList.add('dark');
                document.body.classList.add('dark-theme');
                document.body.classList.remove('light-theme');
                localStorage.setItem('ctq-theme', 'dark');
                this.updateThemeIcon(themeIcon, 'dark');
                console.log('Switched to dark theme');
            }
        });
    },

    // Update theme icon based on current theme
    updateThemeIcon(iconElement, theme) {
        if (!iconElement) return;
        
        if (theme === 'light') {
            // Sun icon for light mode
            iconElement.innerHTML = `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
            `;
        } else {
            // Moon icon for dark mode
            iconElement.innerHTML = `
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
            `;
        }
    },

    // Load genres from API or dummy data
    async loadGenres() {
        try {
            let genres;
            // Try to get genres from API first
            try {
                const response = await fetch('/api/?endpoint=genres');
                const data = await response.json();
                if (data.genres && Array.isArray(data.genres)) {
                    genres = data.genres;
                }
            } catch (e) {
                console.warn('Could not load genres from API, using fallback data');
                // Fallback to test data if API fails
                const testResponse = await fetch('/test-data/genres.json');
                genres = await testResponse.json();
            }
            
            if (!genres || !Array.isArray(genres)) {
                throw new Error('Invalid genres data');
            }
            
            // Desktop menu
            const desktopMenu = document.getElementById('genre-menu');
            if (desktopMenu) {
                desktopMenu.innerHTML = genres.map(g => 
                    `<a href="?page=genre&id=${g.id}" class="block px-4 py-2 hover:bg-gray-700 transition-colors">${g.name}</a>`
                ).join('');
            }
            
            // Mobile menu
            const mobileMenu = document.getElementById('mobile-genre-menu');
            if (mobileMenu) {
                mobileMenu.innerHTML = genres.map(g => 
                    `<a href="?page=genre&id=${g.id}" class="block px-2 py-1 text-sm hover:text-blue-400 transition-colors">${g.name}</a>`
                ).join('');
            }
        } catch (e) {
            console.error('Error loading genres:', e);
            // Provide default genres if everything fails
            const defaultGenres = [
                {id: 1, name: 'Science Fiction'},
                {id: 2, name: 'Fantasy'},
                {id: 3, name: 'Mystery'}
            ];
            
            const desktopMenu = document.getElementById('genre-menu');
            if (desktopMenu) {
                desktopMenu.innerHTML = defaultGenres.map(g => 
                    `<a href="?page=genre&id=${g.id}" class="block px-4 py-2 hover:bg-gray-700 transition-colors">${g.name}</a>`
                ).join('');
            }
            
            const mobileMenu = document.getElementById('mobile-genre-menu');
            if (mobileMenu) {
                mobileMenu.innerHTML = defaultGenres.map(g => 
                    `<a href="?page=genre&id=${g.id}" class="block px-2 py-1 text-sm hover:text-blue-400 transition-colors">${g.name}</a>`
                ).join('');
            }
        }
    },

    // Load CSS dynamically
    loadCSS(href) {
        if (document.querySelector(`link[href="${href}"]`)) return;
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = href;
        document.head.appendChild(link);
    },

    // Load JS dynamically
    loadJS(src) {
        return new Promise((resolve, reject) => {
            if (document.querySelector(`script[src="${src}"]`)) {
                resolve();
                return;
            }
            const script = document.createElement('script');
            script.src = src;
            script.onload = resolve;
            script.onerror = reject;
            document.body.appendChild(script);
        });
    }
};

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', () => CTQ.init());
</file>

<file path="assets/js/router.js">
// Simple router for loading page content
// assets/js/router.js
const Router = {
  init() {
    window.addEventListener('popstate', () => this.loadPage());
    document.addEventListener('click', e => {
      const a = e.target.closest('a[href^="?page="]');
      if (!a) return;
      e.preventDefault();
      history.pushState(null, '', a.href);
      this.loadPage();
    });
    this.loadPage();
  },

  async loadPage() {
    const content = document.getElementById('content');
    if (!content) return;
    
    const page = new URLSearchParams(location.search).get('page') || 'home';
    
    // Update navigation highlighting
    this.updateNav(page);
    
    // Clean up any previous page resources
    this._cleanupCurrentPage();

    try {
      const res = await fetch(`pages/${page}.html`);
      if (!res.ok) throw new Error('not found');

      // Inject the HTML (link & script tags will be parsed)
      content.innerHTML = await res.text();
      
      // Run any inline scripts
      this._runInlineScripts(content);
      
      // Scroll to top
      window.scrollTo(0, 0);
      
      // Update document title
      const pageTitle = content.querySelector('h1')?.textContent || page.charAt(0).toUpperCase() + page.slice(1);
      document.title = `${pageTitle} | ContinueThe.Quest`;
      
    } catch (error) {
      console.error('Page loading error:', error);
      content.innerHTML = `
        <div class="py-16 text-center">
          <h1 class="text-4xl font-bold">404</h1>
          <p class="mt-4 text-gray-400">Page not found.</p>
          <a href="?page=home" class="mt-6 inline-block px-6 py-3 bg-blue-600 rounded">Go Home</a>
        </div>
      `;
    }
  },

  updateNav(page) {
    document.querySelectorAll('.nav-link').forEach(link => {
      const linkPage = new URLSearchParams(link.getAttribute('href')).get('page');
      if (linkPage === page) {
        link.classList.add('font-medium');
      } else {
        link.classList.remove('font-medium');
      }
    });
  },
  
  _cleanupCurrentPage() {
    // Call cleanup method if available on current page
    if (window.homePage?.cleanup) window.homePage.cleanup();
    // Add other page cleanup methods as they're implemented
  },

  // <script> tags injected via innerHTML won't execute automatically,
  // so we move them out and re-append them to trigger execution.
  _runInlineScripts(container) {
    container.querySelectorAll('script').forEach(old => {
      const s = document.createElement('script');
      if (old.src) s.src = old.src;
      else s.textContent = old.textContent;
      document.body.appendChild(s);
      old.remove();
    });
  }
};

document.addEventListener('DOMContentLoaded', () => Router.init());
</file>

<file path="includes/utils.php">
<?php
// Common utility functions for ContinueThe.Quest

/**
 * Sanitize output for HTML
 */
function h($str) {
    return htmlspecialchars($str, ENT_QUOTES, 'UTF-8');
}

/**
 * Get database connection
 */
function getDB() {
    static $pdo = null;
    if ($pdo === null) {
        $host = getenv('DB_HOST');
        $port = getenv('DB_PORT') ?: 3306;
        $db   = getenv('DB_NAME');
        $user = getenv('DB_USER');
        $pass = getenv('DB_PASSWORD');
        $dsn  = "mysql:host={$host};port={$port};dbname={$db};charset=utf8mb4";
        
        try {
            $pdo = new PDO($dsn, $user, $pass, [
                PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                PDO::ATTR_EMULATE_PREPARES => false,
            ]);
        } catch (PDOException $e) {
            error_log("Database connection failed: " . $e->getMessage());
            die("Database connection failed");
        }
    }
    return $pdo;
}

/**
 * Generate CSRF token
 */
function generateCSRFToken() {
    if (empty($_SESSION['csrf_token'])) {
        $_SESSION['csrf_token'] = bin2hex(random_bytes(32));
    }
    return $_SESSION['csrf_token'];
}

/**
 * Verify CSRF token
 */
function verifyCSRFToken($token) {
    return isset($_SESSION['csrf_token']) && hash_equals($_SESSION['csrf_token'], $token);
}

/**
 * Redirect helper
 */
function redirect($url, $code = 302) {
    header("Location: $url", true, $code);
    exit;
}

/**
 * JSON response helper
 */
function jsonResponse($data, $code = 200) {
    http_response_code($code);
    header('Content-Type: application/json');
    echo json_encode($data);
    exit;
}

/**
 * Get user upload directory
 */
function getUserUploadDir($userId) {
    $baseDir = __DIR__ . '/../uploads/users/' . intval($userId);
    if (!is_dir($baseDir)) {
        mkdir($baseDir, 0755, true);
        mkdir($baseDir . '/avatars', 0755);
        mkdir($baseDir . '/images', 0755);
        mkdir($baseDir . '/texts', 0755);
    }
    return $baseDir;
}

/**
 * Format file size
 */
function formatFileSize($bytes) {
    $units = ['B', 'KB', 'MB', 'GB'];
    $bytes = max($bytes, 0);
    $pow = floor(($bytes ? log($bytes) : 0) / log(1024));
    $pow = min($pow, count($units) - 1);
    $bytes /= pow(1024, $pow);
    return round($bytes, 2) . ' ' . $units[$pow];
}

/**
 * Time ago helper
 */
function timeAgo($datetime) {
    $time = strtotime($datetime);
    $now = time();
    $diff = $now - $time;
    
    if ($diff < 60) return 'just now';
    if ($diff < 3600) return floor($diff / 60) . ' min ago';
    if ($diff < 86400) return floor($diff / 3600) . ' hours ago';
    if ($diff < 604800) return floor($diff / 86400) . ' days ago';
    
    return date('M j, Y', $time);
}

/**
 * Slug generator
 */
function generateSlug($str) {
    $str = strtolower(trim($str));
    $str = preg_replace('/[^a-z0-9-]/', '-', $str);
    $str = preg_replace('/-+/', '-', $str);
    return trim($str, '-');
}

/**
 * Get current user (placeholder for auth system)
 */
function getCurrentUser() {
    // TODO: Implement actual auth
    return null;
}

/**
 * Check if user is admin
 */
function isAdmin() {
    $user = getCurrentUser();
    return $user && $user['is_admin'] == 1;
}
</file>

<file path="pages/js/home.js">
// Home page specific functionality
window.homePage = {
    init() {
        this.setupNotificationModal();
    },
    
    setupNotificationModal() {
        const btn = document.getElementById('notify-btn');
        const modal = document.getElementById('notify-modal');
        const modalContent = document.getElementById('modal-content');
        const closeBtn = document.getElementById('modal-close');
        const form = document.getElementById('notify-form');
        
        btn?.addEventListener('click', () => {
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => {
                modalContent.classList.remove('scale-95', 'opacity-0');
                modalContent.classList.add('scale-100', 'opacity-100');
            }, 10);
        });
        
        const closeModal = () => {
            modalContent.classList.add('scale-95', 'opacity-0');
            modalContent.classList.remove('scale-100', 'opacity-100');
            setTimeout(() => {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }, 300);
        };
        
        closeBtn?.addEventListener('click', closeModal);
        
        modal?.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });
        
        form?.addEventListener('submit', (e) => {
            e.preventDefault();
            // For now, just show success
            const email = e.target.querySelector('input[type="email"]').value;
            console.log('Email submitted:', email);
            
            // Log the email to localStorage for now (would be replaced with server-side storage)
            const emails = JSON.parse(localStorage.getItem('notify-emails') || '[]');
            emails.push({
                email: email,
                timestamp: new Date().toISOString()
            });
            localStorage.setItem('notify-emails', JSON.stringify(emails));
            
            // Show success message
            form.innerHTML = `
                <div class="text-center py-8">
                    <div class="w-16 h-16 bg-green-600/20 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                    </div>
                    <h4 class="text-xl font-semibold mb-2">You're on the list!</h4>
                    <p class="text-gray-400">We'll notify you when we launch.</p>
                </div>
            `;
            
            setTimeout(closeModal, 2000);
        });
    },
    
    cleanup() {
        // Clean up any event listeners or intervals if needed
    }
};

// Initialize immediately - no need for DOMContentLoaded since this script is at the bottom of the page
window.homePage.init();
</file>

<file path="pages/about.html">
<div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">About ContinueThe.Quest</h1>
    
  <div class="prose prose-invert max-w-none space-y-6">
    <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
      <!-- mascot illustration -->
      <img
        src="/img/bookie-main.webp"
        alt="Bookie Mascot Illustration"
        class="w-32 h-32 mx-auto mb-4 rounded-full"
      />
      <h2 class="text-2xl font-semibold mb-4">Our Mission</h2>
      <p class="text-gray-300 leading-relaxed">
        ContinueThe.Quest is a collaborative storytelling platform where fans and creators come together to expand and continue the stories they love. Whether it's a TV show that ended too soon, a movie that left questions unanswered, or a book series that captured your imagination, we provide the tools and community to keep those stories alive.
      </p>
    </div>
        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">How It Works</h2>
            <div class="space-y-4 text-gray-300">
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-10 h-10 bg-blue-600/20 rounded-lg flex items-center justify-center">
                        <span class="text-blue-400 font-bold">1</span>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-1">Create or Find Media</h3>
                        <p>Start with any story universe - from popular franchises to indie creations.</p>
                    </div>
                </div>
                
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-10 h-10 bg-purple-600/20 rounded-lg flex items-center justify-center">
                        <span class="text-purple-400 font-bold">2</span>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-1">Branch the Narrative</h3>
                        <p>Create alternate timelines, prequels, sequels, or parallel stories.</p>
                    </div>
                </div>
                
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-10 h-10 bg-green-600/20 rounded-lg flex items-center justify-center">
                        <span class="text-green-400 font-bold">3</span>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-1">Collaborate & Create</h3>
                        <p>Write segments solo or with AI assistance, building on others' work.</p>
                    </div>
                </div>
                
                <div class="flex gap-4">
                    <div class="flex-shrink-0 w-10 h-10 bg-orange-600/20 rounded-lg flex items-center justify-center">
                        <span class="text-orange-400 font-bold">4</span>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-1">Engage & Evolve</h3>
                        <p>Vote, comment, and help the best stories rise to the top.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">Coming Soon</h2>
            <p class="text-gray-300 mb-4">
                We're currently in development, building a platform that combines the best of collaborative writing, AI assistance, and community curation. Join our mailing list to be notified when we launch!
            </p>
            <a href="?page=home" class="inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors">
                Back to Home
            </a>
        </div>
    </div>
</div>
</file>

<file path="pages/browse.html">
<div class="max-w-6xl mx-auto">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-4xl font-bold">Browse Stories</h1>

    <!-- Sort Options -->
    <div class="flex items-center gap-4">
      <label class="text-gray-400">Sort by:</label>
      <select class="bg-gray-800 border border-gray-700 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-600 focus:outline-none">
        <option value="new">Newest</option>
        <option value="popular">Popular</option>
        <option value="hot">Hot</option>
        <option value="rising">Rising</option>
      </select>
    </div>
  </div>

  <!-- Coming Soon Message -->
  <div class="bg-gray-800/30 rounded-lg p-12 border border-gray-700 text-center">
    <div class="w-20 h-20 rounded-full bg-blue-600/20 flex items-center justify-center mx-auto mb-6">
      <img
        src="/img/bookie-main.webp"
        alt="Coming Soon Icon"
        class="w-10 h-10"
      />
    </div>
    <h2 class="text-2xl font-semibold mb-4">Stories Coming Soon</h2>
    <p class="text-gray-400 max-w-2xl mx-auto mb-8">
      Once we launch, this is where you'll discover amazing continuations, alternate endings, and expanded universes created by our community. Be among the first to explore!
    </p>
        
        <!-- Sample Preview Cards -->
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 mt-12">
            <div class="bg-gray-800/50 rounded-lg p-6 border border-gray-700 opacity-50">
                <div class="h-32 bg-gray-700 rounded-lg mb-4 animate-pulse"></div>
                <div class="h-4 bg-gray-700 rounded w-3/4 mb-2 animate-pulse"></div>
                <div class="h-3 bg-gray-700 rounded w-1/2 animate-pulse"></div>
            </div>
            <div class="bg-gray-800/50 rounded-lg p-6 border border-gray-700 opacity-50">
                <div class="h-32 bg-gray-700 rounded-lg mb-4 animate-pulse"></div>
                <div class="h-4 bg-gray-700 rounded w-3/4 mb-2 animate-pulse"></div>
                <div class="h-3 bg-gray-700 rounded w-1/2 animate-pulse"></div>
            </div>
            <div class="bg-gray-800/50 rounded-lg p-6 border border-gray-700 opacity-50">
                <div class="h-32 bg-gray-700 rounded-lg mb-4 animate-pulse"></div>
                <div class="h-4 bg-gray-700 rounded w-3/4 mb-2 animate-pulse"></div>
                <div class="h-3 bg-gray-700 rounded w-1/2 animate-pulse"></div>
            </div>
        </div>
    </div>
</div>
</file>

<file path="pages/contact.html">
<div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">Contact Us</h1>
    
    <div class="grid md:grid-cols-2 gap-8">
        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6">Get in Touch</h2>
            <p class="text-gray-300 leading-relaxed mb-6">
                Have questions, feedback, or suggestions? We'd love to hear from you! Fill out the form, and we'll get back to you as soon as possible.
            </p>
            
            <div class="space-y-4 mb-8">
                <div class="flex items-center gap-4">
                    <div class="w-10 h-10 bg-blue-600/20 rounded-full flex items-center justify-center flex-shrink-0">
                        <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-medium mb-1">Email</h3>
                        <a href="mailto:support@continuethe.quest" class="text-blue-400 hover:underline">support@continuethe.quest</a>
                    </div>
                </div>
                
                <div class="flex items-center gap-4">
                    <div class="w-10 h-10 bg-purple-600/20 rounded-full flex items-center justify-center flex-shrink-0">
                        <svg class="w-5 h-5 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-lg font-medium mb-1">Social Media</h3>
                        <div class="flex gap-3">
                            <a href="https://twitter.com/continuequestHQ" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 transition-colors">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M8.29 20.251c7.547 0 11.675-6.253 11.675-11.675 0-.178 0-.355-.012-.53A8.348 8.348 0 0022 5.92a8.19 8.19 0 01-2.357.646 4.118 4.118 0 001.804-2.27 8.224 8.224 0 01-2.605.996 4.107 4.107 0 00-6.993 3.743 11.65 11.65 0 01-8.457-4.287 4.106 4.106 0 001.27 5.477A4.072 4.072 0 012.8 9.713v.052a4.105 4.105 0 003.292 4.022 4.095 4.095 0 01-1.853.07 4.108 4.108 0 003.834 2.85A8.233 8.233 0 012 18.407a11.616 11.616 0 006.29 1.84"/>
                                </svg>
                            </a>
                            <a href="https://instagram.com/continuequestHQ" target="_blank" rel="noopener noreferrer" class="text-purple-400 hover:text-purple-300 transition-colors">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/>
                                </svg>
                            </a>
                            <a href="https://discord.gg/continuequest" target="_blank" rel="noopener noreferrer" class="text-indigo-400 hover:text-indigo-300 transition-colors">
                                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="bg-gray-900/50 rounded-lg p-6 border border-gray-700">
                <h3 class="text-lg font-semibold mb-3">Response Time</h3>
                <p class="text-gray-300">
                    We typically respond to inquiries within 24-48 hours during business days. For urgent matters, please email us directly at <a href="mailto:urgent@continuethe.quest" class="text-blue-400 hover:underline">urgent@continuethe.quest</a>.
                </p>
            </div>
        </div>
        
        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6">Send a Message</h2>
            
            <form id="contact-form" class="space-y-4">
                <div>
                    <label for="name" class="block text-gray-300 mb-2">Name</label>
                    <input type="text" id="name" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="email" class="block text-gray-300 mb-2">Email</label>
                    <input type="email" id="email" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:outline-none" required>
                </div>
                
                <div>
                    <label for="subject" class="block text-gray-300 mb-2">Subject</label>
                    <select id="subject" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:outline-none">
                        <option value="general">General Inquiry</option>
                        <option value="support">Technical Support</option>
                        <option value="feedback">Feedback</option>
                        <option value="partnership">Partnership Opportunity</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div>
                    <label for="message" class="block text-gray-300 mb-2">Message</label>
                    <textarea id="message" rows="6" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-600 focus:outline-none resize-none" required></textarea>
                </div>
                
                <div class="flex items-start gap-2">
                    <input type="checkbox" id="consent" class="mt-1" required>
                    <label for="consent" class="text-sm text-gray-400">
                        I consent to having this website store my submitted information so they can respond to my inquiry. See our <a href="?page=privacy" class="text-blue-400 hover:underline">Privacy Policy</a> for more information.
                    </label>
                </div>
                
                <button type="submit" class="w-full px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-colors">
                    Send Message
                </button>
            </form>
            
            <!-- Success message (hidden by default) -->
            <div id="contact-success" class="hidden mt-4 p-4 bg-green-600/20 border border-green-600/30 rounded-lg">
                <div class="flex items-center gap-3">
                    <div class="w-8 h-8 bg-green-600/30 rounded-full flex items-center justify-center">
                        <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                        </svg>
                    </div>
                    <div>
                        <h4 class="font-medium">Message Sent!</h4>
                        <p class="text-sm text-gray-400">We'll get back to you as soon as possible.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form');
    const successMessage = document.getElementById('contact-success');
    
    if (form) {
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // In a real implementation, you would send the form data to a server
            // For now, just simulate a successful submission
            const formData = {
                name: form.querySelector('#name').value,
                email: form.querySelector('#email').value,
                subject: form.querySelector('#subject').value,
                message: form.querySelector('#message').value
            };
            
            console.log('Form submitted:', formData);
            
            // Store in localStorage for demo purposes
            const contacts = JSON.parse(localStorage.getItem('contact-messages') || '[]');
            contacts.push({
                ...formData,
                timestamp: new Date().toISOString()
            });
            localStorage.setItem('contact-messages', JSON.stringify(contacts));
            
            // Show success message
            form.style.display = 'none';
            successMessage.classList.remove('hidden');
        });
    }
});
</script>
</file>

<file path="pages/faq.html">
<div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">Frequently Asked Questions</h1>
    
    <div class="prose prose-invert max-w-none space-y-6">
        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6">General Questions</h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">What is ContinueThe.Quest?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        ContinueThe.Quest is a collaborative storytelling platform where fans and creators come together to expand and continue stories they love. Whether it's a TV show that ended too soon, a movie that left questions unanswered, or a book series that captured your imagination, we provide the tools and community to keep those stories alive.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">Is ContinueThe.Quest free to use?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Basic features of ContinueThe.Quest are free for all users. We also offer premium features that require credits, which can be earned through platform engagement or purchased. Our goal is to make collaborative storytelling accessible to everyone while supporting the platform's growth and development.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">When will ContinueThe.Quest launch?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        We're currently in development and plan to launch soon. Sign up on our home page to be notified when we go live. We're working hard to create the best possible experience for collaborative storytelling!
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6">Account & Profile</h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">How do I create an account?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Once we launch, you'll be able to create an account using your email address or through WebAuthn (passwordless authentication). We prioritize security and convenience, so you won't need to remember complex passwords.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">Can I delete my account?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Yes, you can delete your account at any time from your account settings. Please note that while your personal information will be removed, any content you've contributed to collaborative stories may remain on the platform to maintain narrative continuity for other users.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">What is the credit system?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Credits are our platform's internal currency. You can earn credits by creating quality content, receiving upvotes, and participating in the community. Credits can be used for premium features like AI-assisted writing, advanced formatting options, and boosting your content visibility.
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6">Content Creation</h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">What types of stories can I create?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        You can create continuations, prequels, alternate endings, or parallel stories for existing media like TV shows, movies, books, or games. You can also create original stories that aren't based on existing media. Our platform supports a wide range of genres and storytelling styles.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">How does collaborative storytelling work?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Our platform uses a branching system that allows multiple narrative paths to develop from a single starting point. You can create a new branch from any existing story point, or contribute segments to existing branches. The community votes on the quality of contributions, helping the best narratives rise to prominence.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">What is AI-assisted writing?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Our AI writing assistant helps with generating ideas, improving prose, ensuring narrative consistency, and overcoming writer's block. It's designed to enhance your creativity, not replace it. The AI can suggest continuations based on the existing narrative, help develop characters, or even generate dialogue in the style of the original work.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">Who owns the content I create?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        You retain ownership of the original content you create on our platform. However, by posting content, you grant us a license to display, distribute, and promote it within our platform. For collaborative works, all contributors share creative ownership. Please note that if you're creating content based on existing intellectual property, the original rights holders maintain their rights to the underlying IP.
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6">Community & Moderation</h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">How is content moderated?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        We use a combination of community reporting, automated systems, and human moderation to ensure content adheres to our community guidelines. We strive to maintain a respectful and creative environment while allowing for diverse storytelling approaches and themes.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">Can I report inappropriate content?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Yes, every piece of content has a report option. We take all reports seriously and review them promptly. You can report content that violates our community guidelines, contains harmful material, or infringes on intellectual property rights.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">How can I connect with other creators?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        You can follow creators whose work you enjoy, leave comments on stories, and collaborate directly on branches. We also plan to implement community features like forums, writing groups, and collaborative challenges to foster connections between storytellers.
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-6">Technical Questions</h2>
            
            <div class="space-y-6">
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">Which browsers are supported?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        ContinueThe.Quest works best on modern browsers like Chrome, Firefox, Safari, and Edge. We recommend keeping your browser updated to the latest version for the best experience.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">Is there a mobile app?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        Our platform is fully responsive and works well on mobile browsers. We plan to develop dedicated mobile apps in the future to enhance the mobile experience even further.
                    </p>
                </div>
                
                <div>
                    <h3 class="text-xl font-medium text-blue-400 mb-2">What should I do if I encounter a bug?</h3>
                    <p class="text-gray-300 leading-relaxed">
                        If you encounter any issues, please report them through our feedback form or contact our support team at <a href="mailto:support@continuethe.quest" class="text-blue-400 hover:underline">support@continuethe.quest</a>. Include as much detail as possible about the issue, including your browser, device, and steps to reproduce the problem.
                    </p>
                </div>
            </div>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">Still Have Questions?</h2>
            <p class="text-gray-300 leading-relaxed">
                If you couldn't find the answer to your question, please contact us at <a href="mailto:support@continuethe.quest" class="text-blue-400 hover:underline">support@continuethe.quest</a>. We're here to help!
            </p>
        </div>
    </div>
</div>
</file>

<file path="pages/home.html">
<!-- Hero Section -->
<section class="relative overflow-hidden">
  <!-- full-width banner graphic -->
<!-- Dark Mode Banner -->
<img
  src="/img/banner.webp"
  alt="ContinueThe.Quest Banner Dark"
  class="w-full max-h-60 object-cover mb-8 rounded-lg dark:block hidden"
/>

<!-- Light Mode Banner -->
<img
  src="/img/banner-light.webp"
  alt="ContinueThe.Quest Banner Light"
  class="w-full max-h-60 object-cover mb-8 rounded-lg dark:hidden block"
/>


  <div class="absolute inset-0 bg-gradient-to-br from-blue-600/20 to-purple-600/20 blur-3xl"></div>
  <div class="relative max-w-6xl mx-auto py-24 px-4 text-center">
    <div class="inline-flex items-center gap-2 px-4 py-2 bg-blue-600/20 border border-blue-600/30 rounded-full text-sm mb-8">
      <span class="relative flex h-2 w-2">
        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"></span>
        <span class="relative inline-flex rounded-full h-2 w-2 bg-blue-500"></span>
      </span>
      Coming Soon
    </div>

    <h1 class="text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
      Continue The Quest
    </h1>

    <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto">
      Where unfinished stories find their endings, and beloved universes expand beyond their original boundaries.
    </p>

    <div class="flex flex-col sm:flex-row gap-4 justify-center mb-12">
      <button class="px-8 py-4 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-all transform hover:scale-105" id="notify-btn">
        Notify Me When We Launch
      </button>
      <a href="?page=about" class="px-8 py-4 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium transition-all">
        Learn More
      </a>
    </div>

    <!-- Stats Preview -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-3xl mx-auto mt-16">
      <div class="bg-gray-800/50 backdrop-blur-sm rounded-lg p-6 border border-gray-700">
        <div class="text-3xl font-bold text-blue-400 mb-2">∞</div>
        <div class="text-gray-300">Possible Stories</div>
      </div>
      <div class="bg-gray-800/50 backdrop-blur-sm rounded-lg p-6 border border-gray-700">
        <div class="text-3xl font-bold text-purple-400 mb-2">24/7</div>
        <div class="text-gray-300">AI Collaboration</div>
      </div>
      <div class="bg-gray-800/50 backdrop-blur-sm rounded-lg p-6 border border-gray-700">
        <div class="text-3xl font-bold text-green-400 mb-2">100%</div>
        <div class="text-gray-300">Community Driven</div>
      </div>
    </div>
  </div>
</section>

<script src="/pages/js/home.js"></script>

<!-- Features Preview -->
<section class="py-24">
    <div class="max-w-6xl mx-auto px-4">
        <h2 class="text-3xl md:text-4xl font-bold text-center mb-16">
            What's Coming
        </h2>
        
        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            <div class="group">
                <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700 hover:border-blue-600/50 transition-all">
                    <div class="w-12 h-12 bg-blue-600/20 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Expand Any Universe</h3>
                    <p class="text-gray-400">Continue stories from TV shows, movies, books, and games that left you wanting more.</p>
                </div>
            </div>
            
            <div class="group">
                <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700 hover:border-purple-600/50 transition-all">
                    <div class="w-12 h-12 bg-purple-600/20 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <svg class="w-6 h-6 text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">AI-Powered Creation</h3>
                    <p class="text-gray-400">Collaborate with advanced AI to generate compelling narratives and explore new possibilities.</p>
                </div>
            </div>
            
            <div class="group">
                <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700 hover:border-green-600/50 transition-all">
                    <div class="w-12 h-12 bg-green-600/20 rounded-lg flex items-center justify-center mb-4 group-hover:scale-110 transition-transform">
                        <svg class="w-6 h-6 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Community Collaboration</h3>
                    <p class="text-gray-400">Vote, comment, and build upon others' work to create rich, branching narratives.</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Email Notification Modal (hidden by default) -->
<div id="notify-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden items-center justify-center">
    <div class="bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4 transform transition-all scale-95 opacity-0" id="modal-content">
        <h3 class="text-2xl font-bold mb-4">Get Notified</h3>
        <p class="text-gray-400 mb-6">Be the first to know when ContinueThe.Quest launches!</p>
        <form id="notify-form">
            <input type="email" placeholder="your@email.com" class="w-full px-4 py-3 bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-600 focus:outline-none mb-4" required>
            <div class="flex gap-4">
                <button type="submit" class="flex-1 px-4 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-colors">
                    Notify Me
                </button>
                <button type="button" id="modal-close" class="px-4 py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium transition-colors">
                    Cancel
                </button>
            </div>
        </form>
    </div>
</div>


<script src="/pages/js/home.js"></script>
</file>

<file path="pages/privacy.html">
<div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">Privacy Policy</h1>
    
    <div class="prose prose-invert max-w-none space-y-6">
        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">1. Introduction</h2>
            <p class="text-gray-300 leading-relaxed">
                At ContinueThe.Quest, we respect your privacy and are committed to protecting your personal data. This Privacy Policy explains how we collect, use, and safeguard your information when you use our platform.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">2. Information We Collect</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                We collect several types of information from and about users of our platform, including:
            </p>
            <ul class="list-disc pl-6 text-gray-300 space-y-2">
                <li><strong class="text-white">Personal Data:</strong> Name, email address, and account credentials</li>
                <li><strong class="text-white">Usage Data:</strong> Information about how you use our platform, including your interactions with content</li>
                <li><strong class="text-white">Device Information:</strong> IP address, browser type, operating system, and other technology identifiers</li>
                <li><strong class="text-white">User Content:</strong> Information you provide when creating content on our platform</li>
            </ul>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">3. How We Collect Information</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                We collect information through:
            </p>
            <ul class="list-disc pl-6 text-gray-300 space-y-2">
                <li>Direct interactions when you create an account or profile</li>
                <li>Automated technologies such as cookies and similar tracking technologies</li>
                <li>Third-party sources, such as authentication providers if you choose to link accounts</li>
            </ul>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">4. How We Use Your Information</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                We use your information to:
            </p>
            <ul class="list-disc pl-6 text-gray-300 space-y-2">
                <li>Provide, maintain, and improve our platform</li>
                <li>Process transactions and manage your account</li>
                <li>Personalize your experience and deliver content relevant to your interests</li>
                <li>Communicate with you about updates, security alerts, and support</li>
                <li>Monitor and analyze trends, usage, and activities in connection with our platform</li>
                <li>Detect, prevent, and address technical issues, fraud, and security breaches</li>
                <li>Comply with legal obligations</li>
            </ul>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">5. Information Sharing and Disclosure</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                We may share your information with:
            </p>
            <ul class="list-disc pl-6 text-gray-300 space-y-2 mb-4">
                <li>Service providers who perform services on our behalf</li>
                <li>Business partners with your consent</li>
                <li>Law enforcement or other authorities if required by law</li>
                <li>In connection with a business transaction such as a merger, acquisition, or sale of assets</li>
            </ul>
            <p class="text-gray-300 leading-relaxed">
                We do not sell your personal information to third parties.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">6. Cookies and Tracking Technologies</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                We use cookies and similar tracking technologies to track activity on our platform and to hold certain information. You can instruct your browser to refuse all cookies or to indicate when a cookie is being sent.
            </p>
            <p class="text-gray-300 leading-relaxed">
                We use both session cookies (which expire when you close your browser) and persistent cookies (which stay on your device until you delete them) to provide you with a more personal and interactive experience on our platform.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">7. Data Security</h2>
            <p class="text-gray-300 leading-relaxed">
                We have implemented appropriate technical and organizational measures to secure your personal data from accidental loss, unauthorized access, alteration, and disclosure. However, no method of transmission over the Internet or electronic storage is 100% secure, and we cannot guarantee absolute security.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">8. Your Data Protection Rights</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                Depending on your location, you may have the following rights:
            </p>
            <ul class="list-disc pl-6 text-gray-300 space-y-2">
                <li>Access and receive a copy of your personal data</li>
                <li>Rectify inaccurate personal data</li>
                <li>Request deletion of your personal data</li>
                <li>Object to processing of your personal data</li>
                <li>Data portability</li>
                <li>Withdraw consent</li>
            </ul>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">9. Children's Privacy</h2>
            <p class="text-gray-300 leading-relaxed">
                Our platform is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If we learn we have collected personal information from a child under 13, we will delete that information.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">10. Changes to This Privacy Policy</h2>
            <p class="text-gray-300 leading-relaxed">
                We may update our Privacy Policy from time to time. We will notify you of any changes by posting the new Privacy Policy on this page and updating the "Last updated" date. You are advised to review this Privacy Policy periodically for any changes.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">11. Contact Us</h2>
            <p class="text-gray-300 leading-relaxed">
                If you have any questions about this Privacy Policy, please contact us at <a href="mailto:privacy@continuethe.quest" class="text-blue-400 hover:underline">privacy@continuethe.quest</a>.
            </p>
        </div>

        <div class="text-center py-6">
            <p class="text-gray-400">Last updated: June 8, 2025</p>
        </div>
    </div>
</div>
</file>

<file path="pages/terms.html">
<div class="max-w-4xl mx-auto">
    <h1 class="text-4xl font-bold mb-8">Terms of Service</h1>
    
    <div class="prose prose-invert max-w-none space-y-6">
        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">1. Introduction</h2>
            <p class="text-gray-300 leading-relaxed">
                Welcome to ContinueThe.Quest ("we," "our," or "us"). By accessing or using our platform, you agree to be bound by these Terms of Service ("Terms"). Please read these Terms carefully before using our services.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">2. User Accounts</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                To access certain features of our platform, you must create an account. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account.
            </p>
            <p class="text-gray-300 leading-relaxed">
                You must provide accurate and complete information when creating an account and keep this information updated. We reserve the right to suspend or terminate accounts that violate our Terms.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">3. User Content</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                Our platform allows users to create, post, and share content. By submitting content to our platform, you grant us a worldwide, non-exclusive, royalty-free license to use, reproduce, modify, adapt, publish, translate, and distribute your content.
            </p>
            <p class="text-gray-300 leading-relaxed mb-4">
                You retain all ownership rights to your content, but you are responsible for ensuring that your content:
            </p>
            <ul class="list-disc pl-6 text-gray-300 space-y-2 mb-4">
                <li>Does not violate any third-party rights, including intellectual property rights</li>
                <li>Does not contain harmful, offensive, or illegal material</li>
                <li>Complies with all applicable laws and regulations</li>
            </ul>
            <p class="text-gray-300 leading-relaxed">
                We reserve the right to remove or modify user content that violates these Terms or that we find objectionable for any reason.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">4. Credit System</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                Our platform uses a credit system that allows users to access certain features and services. Credits may be earned through platform activities or purchased.
            </p>
            <p class="text-gray-300 leading-relaxed">
                Credits have no monetary value outside of our platform and cannot be transferred, sold, or exchanged for cash. We reserve the right to modify, add, or remove credit-based features at any time.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">5. Intellectual Property</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                All content on our platform, including but not limited to text, graphics, logos, icons, images, audio clips, and software, is the property of ContinueThe.Quest or its content suppliers and is protected by copyright and other intellectual property laws.
            </p>
            <p class="text-gray-300 leading-relaxed">
                You may not reproduce, distribute, modify, create derivative works from, publicly display, or publicly perform any of the materials on our platform without our prior written consent.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">6. Prohibited Activities</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                You agree not to engage in any of the following activities:
            </p>
            <ul class="list-disc pl-6 text-gray-300 space-y-2">
                <li>Using our platform for any illegal purpose</li>
                <li>Attempting to gain unauthorized access to our systems or other user accounts</li>
                <li>Uploading or transmitting viruses, malware, or other harmful code</li>
                <li>Harvesting or collecting user information without consent</li>
                <li>Interfering with the proper functioning of our platform</li>
                <li>Creating multiple accounts to evade restrictions or limitations</li>
                <li>Engaging in any activity that could disable, overburden, or impair our servers or networks</li>
            </ul>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">7. Limitation of Liability</h2>
            <p class="text-gray-300 leading-relaxed mb-4">
                To the maximum extent permitted by law, ContinueThe.Quest and its affiliates, officers, employees, agents, partners, and licensors shall not be liable for any indirect, incidental, special, consequential, or punitive damages.
            </p>
            <p class="text-gray-300 leading-relaxed">
                Our platform is provided on an "as is" and "as available" basis. We make no warranties, expressed or implied, regarding the operation of our platform or the information, content, or materials included on our platform.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">8. Changes to Terms</h2>
            <p class="text-gray-300 leading-relaxed">
                We reserve the right to modify these Terms at any time. We will provide notice of any material changes by posting the revised Terms on our platform or by other means. Your continued use of our platform after such modifications constitutes your acceptance of the revised Terms.
            </p>
        </div>

        <div class="bg-gray-800/30 rounded-lg p-8 border border-gray-700">
            <h2 class="text-2xl font-semibold mb-4">9. Contact Information</h2>
            <p class="text-gray-300 leading-relaxed">
                If you have any questions about these Terms, please contact us at <a href="mailto:support@continuethe.quest" class="text-blue-400 hover:underline">support@continuethe.quest</a>.
            </p>
        </div>

        <div class="text-center py-6">
            <p class="text-gray-400">Last updated: June 8, 2025</p>
        </div>
    </div>
</div>
</file>

<file path=".htaccess">
# Disable directory listings
Options -Indexes

# Custom error pages
ErrorDocument 404 /404.html
ErrorDocument 500 /500.html

# Block truly sensitive files
<FilesMatch "\.(env|md|sql|log)$">
    Require all denied
</FilesMatch>

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "DENY"
    Header set X-XSS-Protection "1; mode=block"
    Header set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# Serve manifest with correct MIME
<IfModule mod_mime.c>
    AddType application/manifest+json .webmanifest
</IfModule>

# Compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Cache static assets
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 week"
    ExpiresByType application/javascript "access plus 1 week"
    ExpiresByType application/manifest+json "access plus 1 week"
    ExpiresByType application/json "access plus 1 week"
</IfModule>
</file>

<file path="404.html">
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 - Page Not Found | ContinueThe.Quest</title>
    <link href="/output.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen">
    <div class="text-center px-4">
        <h1 class="text-8xl font-bold text-blue-600 mb-4">404</h1>
        <h2 class="text-3xl font-semibold mb-4">Quest Not Found</h2>
        <p class="text-gray-400 mb-8 max-w-md mx-auto">
            Looks like this story hasn't been written yet. Why not start a new adventure?
        </p>
        <a href="/" class="inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-all transform hover:scale-105">
            Return Home
        </a>
    </div>
</body>
</html>
</file>

<file path="500.html">
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>500 - Server Error | ContinueThe.Quest</title>
    <link href="/output.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen">
    <div class="text-center px-4">
        <h1 class="text-8xl font-bold text-red-600 mb-4">500</h1>
        <h2 class="text-3xl font-semibold mb-4">Quest Interrupted</h2>
        <p class="text-gray-400 mb-8 max-w-md mx-auto">
            Something went wrong on our end. Our scribes are working to fix it!
        </p>
        <a href="/" class="inline-block px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-all transform hover:scale-105">
            Return Home
        </a>
    </div>
</body>
</html>
</file>

<file path="bootstrap.php">
<?php
function loadEnv(string $path): void {
    if (!is_readable($path)) return;
    foreach (file($path, FILE_IGNORE_NEW_LINES | FILE_SKIP_EMPTY_LINES) as $line) {
        if (strpos(trim($line), '#') === 0) continue;
        [$name, $value] = explode('=', $line, 2) + [null, null];
        if (!$name) continue;
        $value = trim($value);
        $value = trim($value, "\"'");
        putenv("$name=$value");
        $_ENV[$name] = $value;
        $_SERVER[$name] = $value;
    }
}

loadEnv(__DIR__ . '/.env');
</file>

<file path="deploy.php">
<?php
// deploy.php
// ----------------------------------------------------------------------------
// Load environment and helpers
require_once __DIR__ . '/bootstrap.php';
date_default_timezone_set('America/New_York');

// Simple logger to logs/deploy.log
$logDir  = __DIR__ . '/logs';
$logFile = $logDir . '/deploy.log';
if (!is_dir($logDir)) {
    mkdir($logDir, 0755, true);
}
function logMsg(string $msg) {
    global $logFile;
    $time = date('[Y-m-d H:i:s]');
    file_put_contents($logFile, "$time $msg\n", FILE_APPEND);
}

// Header
echo "=== Deployment Checklist ===\n";
$appName    = getenv('APP_NAME')    ?: 'Unknown';
$appEnv     = getenv('APP_ENV')     ?: 'Unknown';
$appVersion = getenv('APP_VERSION') ?: 'Unknown';
echo "App Name:    $appName\n";
echo "Environment: $appEnv\n";
echo "Version:     $appVersion\n";
echo "Checked at:  " . date('c') . "\n\n";
logMsg("Start deploy check: $appName v$appVersion ($appEnv)");

// 1) Core directories/files
$checks = [
    'db'               => 'dir',
    'db/schema'        => 'dir',
    'db/schema/schema.sql' => 'file',
    '.gitignore'       => 'file',
    '.repomixignore'   => 'file',
    'bootstrap.php'    => 'file',
    'db.md'            => 'file',
    'index.php'        => 'file',
    'input.css'        => 'file',
    'project.md'       => 'file',
    'deploy.php'       => 'file',
];
foreach ($checks as $path => $type) {
    $full = __DIR__ . "/$path";
    if ($type === 'dir') {
        if (is_dir($full)) {
            echo "[OK] Dir:  $path\n";    logMsg("Dir ok: $path");
        } else {
            echo "[MISSING] Dir:  $path\n"; logMsg("Dir missing: $path");
        }
    } else {
        if (is_file($full)) {
            echo "[OK] File: $path\n";    logMsg("File ok: $path");
        } else {
            echo "[MISSING] File: $path\n"; logMsg("File missing: $path");
        }
    }
}

// 2) .env permissions
$envFile = __DIR__ . '/.env';
if (is_file($envFile)) {
    $perms = substr(sprintf('%o', fileperms($envFile)), -4);
    if ($perms <= '0640') {
        echo "[OK] .env perms: $perms\n"; logMsg(".env perms ok ($perms)");
    } else {
        echo "[WARN] .env perms: $perms (should be ≤0640)\n"; logMsg(".env perms warn ($perms)");
    }
} else {
    echo "[WARN] .env not found\n"; logMsg(".env missing");
}

// 3) Database connectivity + tables
echo "\n=== Database ===\n";
$host = getenv('DB_HOST');
$port = getenv('DB_PORT') ?: 3306;
$db   = getenv('DB_NAME');
$user = getenv('DB_USER');
$pass = getenv('DB_PASSWORD');
$dsn  = "mysql:host={$host};port={$port};dbname={$db};charset=utf8mb4";

try {
    $pdo = new PDO($dsn, $user, $pass, [
        PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
    ]);
    echo "[OK] Connected to {$db}@{$host}:{$port}\n"; logMsg("DB conn ok");
} catch (Exception $e) {
    echo "[ERROR] DB connect failed: " . $e->getMessage() . "\n";
    logMsg("DB conn error: " . $e->getMessage());
    exit(1);
}

// expected tables from schema
$tables = [
    'Users','Media','Branches','Segments',
    'Tags','Tag_Links','Comments','Votes',
    'Credits_Log','Admin_Moderation'
];
foreach ($tables as $t) {
    $stmt = $pdo->prepare(
        "SELECT COUNT(*) FROM information_schema.tables
         WHERE table_schema = ? AND table_name = ?"
    );
    $stmt->execute([$db, $t]);
    if ($stmt->fetchColumn() > 0) {
        echo "[OK] Table exists: $t\n"; logMsg("Table ok: $t");
    } else {
        echo "[MISSING] Table: $t\n"; logMsg("Table missing: $t");
    }
}

// 4) Tailwind CSS
echo "\n=== Tailwind ===\n";
$css = __DIR__ . '/output.css';
if (is_file($css)) {
    echo "[OK] Compiled CSS: output.css\n"; logMsg("CSS ok");
} else {
    echo "[MISSING] output.css (run: npx tailwindcss -i input.css -o output.css)\n";
    logMsg("CSS missing");
}
exec('npx tailwindcss --version 2>&1', $out, $rc);
if ($rc === 0) {
    echo "[OK] Tailwind CLI: " . implode(' ', $out) . "\n"; logMsg("Tailwind CLI ok");
} else {
    echo "[WARN] Tailwind CLI not found or failed\n"; logMsg("Tailwind CLI warn");
}

// 5) .htaccess
echo "\n=== .htaccess ===\n";
$ht = __DIR__ . '/.htaccess';
if (is_file($ht)) {
    echo "[OK] .htaccess exists\n"; logMsg(".htaccess ok");
} else {
    $content = <<<HT
# Disable directory listings
Options -Indexes

# Custom error pages
ErrorDocument 404 /404.html
ErrorDocument 500 /500.html

# Block sensitive files
<FilesMatch "\.(env|md|sql|log)$">
    Require all denied
</FilesMatch>

HT;
    file_put_contents($ht, $content);
    echo "[CREATED] .htaccess\n"; logMsg(".htaccess created");
}

// 6) Create directory structure
echo "\n=== Directory Structure ===\n";
$dirs = [
    'assets/js',
    'assets/css',
    'pages',
    'test-data',
    'uploads/users'
];
foreach ($dirs as $dir) {
    $path = __DIR__ . '/' . $dir;
    if (!is_dir($path)) {
        mkdir($path, 0755, true);
        echo "[CREATED] $dir\n"; logMsg("Created dir: $dir");
    } else {
        echo "[OK] $dir\n"; logMsg("Dir exists: $dir");
    }
}

// 7) Create test data files
echo "\n=== Test Data ===\n";
$genresFile = __DIR__ . '/test-data/genres.json';
if (!is_file($genresFile)) {
    $genres = [
        ['id' => 1, 'name' => 'Science Fiction'],
        ['id' => 2, 'name' => 'Fantasy'],
        ['id' => 3, 'name' => 'Mystery'],
        ['id' => 4, 'name' => 'Horror'],
        ['id' => 5, 'name' => 'Romance'],
        ['id' => 6, 'name' => 'Adventure']
    ];
    file_put_contents($genresFile, json_encode($genres, JSON_PRETTY_PRINT));
    echo "[CREATED] test-data/genres.json\n"; logMsg("Created genres.json");
} else {
    echo "[OK] test-data/genres.json\n"; logMsg("genres.json exists");
}

// 8) Insert dummy data into database
echo "\n=== Database Dummy Data ===\n";
try {
    // Check if we already have data
    $stmt = $pdo->query("SELECT COUNT(*) FROM Tags WHERE is_genre = 1");
    $genreCount = $stmt->fetchColumn();
    
    if ($genreCount == 0) {
        // Insert genre tags
        $genres = json_decode(file_get_contents($genresFile), true);
        $stmt = $pdo->prepare("INSERT INTO Tags (name, is_genre, created_by) VALUES (?, 1, NULL)");
        foreach ($genres as $genre) {
            $stmt->execute([$genre['name']]);
        }
        echo "[INSERTED] " . count($genres) . " genre tags\n";
        logMsg("Inserted genre tags");
        
        // Insert test user
        $stmt = $pdo->prepare("INSERT INTO Users (username, passphrase_hash, email, is_admin) VALUES (?, ?, ?, ?)");
        $stmt->execute(['admin', password_hash('admin123', PASSWORD_DEFAULT), 'admin@example.com', 1]);
        echo "[INSERTED] Test admin user\n";
        logMsg("Inserted test admin");
        
        // Insert sample media
        $stmt = $pdo->prepare("INSERT INTO Media (title, description, created_by) VALUES (?, ?, ?)");
        $stmt->execute(['The Unfinished Tale', 'A story that needs an ending...', 1]);
        echo "[INSERTED] Sample media\n";
        logMsg("Inserted sample media");
    } else {
        echo "[OK] Database already has dummy data\n";
        logMsg("Dummy data exists");
    }
} catch (Exception $e) {
    echo "[ERROR] Failed to insert dummy data: " . $e->getMessage() . "\n";
    logMsg("Dummy data error: " . $e->getMessage());
}


// 8) Insert dummy data into database
echo "\n=== Database Dummy Data ===\n";
try {
    // Check if we already have data
    $stmt = $pdo->query("SELECT COUNT(*) FROM Tags WHERE is_genre = 1");
    $genreCount = $stmt->fetchColumn();
    
    if ($genreCount == 0) {
        // Insert genre tags
        $genres = json_decode(file_get_contents($genresFile), true);
        $stmt = $pdo->prepare("INSERT INTO Tags (name, is_genre, created_by) VALUES (?, 1, NULL)");
        foreach ($genres as $genre) {
            $stmt->execute([$genre['name']]);
        }
        echo "[INSERTED] " . count($genres) . " genre tags\n";
        logMsg("Inserted genre tags");
        
        // Insert test user
        $stmt = $pdo->prepare("INSERT INTO Users (username, passphrase_hash, email, is_admin) VALUES (?, ?, ?, ?)");
        $stmt->execute(['admin', password_hash('admin123', PASSWORD_DEFAULT), 'admin@example.com', 1]);
        echo "[INSERTED] Test admin user\n";
        logMsg("Inserted test admin");
        
        // Insert sample media
        $stmt = $pdo->prepare("INSERT INTO Media (title, description, created_by) VALUES (?, ?, ?)");
        $stmt->execute(['The Unfinished Tale', 'A story that needs an ending...', 1]);
        echo "[INSERTED] Sample media\n";
        logMsg("Inserted sample media");
    } else {
        echo "[OK] Database already has dummy data\n";
        logMsg("Dummy data exists");
    }
} catch (Exception $e) {
    echo "[ERROR] Failed to insert dummy data: " . $e->getMessage() . "\n";
    logMsg("Dummy data error: " . $e->getMessage());
}


echo "\n✅ Deployment check complete. Details in logs/deploy.log\n";
logMsg("Deploy check complete");
</file>

<file path="postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="README.md">
# ContinueThe.Quest

A collaborative storytelling platform where unfinished stories find their endings.

## Quick Setup

1. **Environment Setup**
   ```bash
   cp .env.example .env
   # Edit .env with your database credentials
   ```

2. **Build CSS**
   ```bash
   # Install Tailwind CSS
   npm install
   
   # Build CSS (one-time)
   npm run build-css
   
   # Or watch for changes during development
   npm run watch-css
   ```

3. **Deploy & Setup Database**
   ```bash
   php deploy.php
   ```

## Project Structure

```
/
├── assets/          # Static assets
│   ├── js/         # JavaScript files
│   └── css/        # Additional CSS (if needed)
├── pages/          # Page content (loaded dynamically)
├── test-data/      # Test/dummy data
├── uploads/        # User uploads (git ignored)
├── logs/           # Application logs (git ignored)
├── db/            # Database schema
└── index.php      # Main application entry
```

## Development

- **Adding Pages**: Create `pages/[name].html` and optionally `pages/[name].js` and `pages/[name].css`
- **Routing**: Uses URL parameter `?page=[name]` for navigation
- **Styling**: Uses Tailwind CSS with dark theme by default
- **Database**: MariaDB with schema in `db/schema/schema.sql`

## Features (Coming Soon)

- User authentication (WebAuthn/Passkey-first)
- Media creation and management
- Story branching system
- AI-assisted content generation
- Community voting and engagement
- Credit system for contributions

## Tech Stack

- **Backend**: PHP (procedural style)
- **Frontend**: Vanilla JavaScript, Tailwind CSS
- **Database**: MariaDB
- **Storage**: File-system based
</file>

<file path="STRUCTURE.md">
# Project Structure

## Directory Layout

```
continuethequest/
├── api/                    # API endpoints
│   └── index.php          # Main API router
├── assets/                # Static assets
│   ├── js/               # JavaScript files
│   │   ├── core.js       # Core functionality
│   │   └── router.js     # Page routing
│   └── css/              # Additional CSS (if needed)
├── db/                    # Database files
│   └── schema/           # SQL schema files
│       └── schema.sql    # Complete schema
├── includes/              # PHP includes
│   └── utils.php         # Utility functions
├── logs/                  # Application logs (git ignored)
├── pages/                 # Page content
│   ├── home.html         # Home page content
│   ├── home.js           # Home page JS (optional)
│   ├── about.html        # About page
│   └── browse.html       # Browse page
├── test-data/             # Test/dummy data (git ignored)
│   └── genres.json       # Sample genres
├── uploads/               # User uploads (git ignored)
│   └── users/            # User-specific directories
├── .env                   # Environment config (git ignored)
├── .env.example           # Example env file
├── .gitignore            # Git ignore rules
├── .htaccess             # Apache config
├── .repomixignore        # Repomix ignore rules
├── 404.html              # 404 error page
├── 500.html              # 500 error page
├── bootstrap.php         # Environment loader
├── deploy.php            # Deployment script
├── index.php             # Main entry point
├── input.css             # Tailwind input
├── output.css            # Compiled CSS (git ignored)
├── package.json          # NPM config
├── README.md             # Project readme
└── tailwind.config.js    # Tailwind config
```

## Key Components

### Frontend Architecture
- **Single Entry Point**: `index.php` serves as the main layout/skeleton
- **Dynamic Loading**: Pages are loaded via JavaScript without full page refreshes
- **Modular Pages**: Each page can have its own HTML, JS, and CSS files
- **URL Routing**: Uses query parameters (`?page=name`) for navigation

### Backend Architecture
- **Procedural PHP**: Fast, simple procedural style
- **API Endpoints**: RESTful API in `/api/` for AJAX calls
- **Database**: MariaDB with comprehensive schema
- **File Storage**: User uploads stored in filesystem by user ID

### JavaScript Module System
- **core.js**: Core functionality (menu, theme, utilities)
- **router.js**: Handles page navigation and content loading
- **Page-specific JS**: Optional JS files for individual pages

### CSS Architecture
- **Tailwind CSS**: Utility-first CSS framework
- **Dark Theme Default**: Built with dark mode as primary
- **Custom Components**: Defined in `input.css` layers
- **Page-specific CSS**: Optional CSS files for unique page styles

## Development Workflow

1. **Add a New Page**:
   - Create `pages/[name].html`
   - Optionally add `pages/[name].js` and `pages/[name].css`
   - Link to it with `?page=[name]`

2. **Add API Endpoint**:
   - Add case in `api/index.php`
   - Create handler function
   - Use from frontend with `fetch('/api/?endpoint=[name]')`

3. **Build CSS**:
   - Edit `input.css` or component classes
   - Run `npm run build-css` or `npm run watch-css`

4. **Deploy Changes**:
   - Run `php deploy.php` to verify setup
   - Checks database, directories, and configuration
</file>

<file path="tailwind.config.js">
const colors = require('tailwindcss/colors');

module.exports = {
  content: [
    './*.php',
    './pages/*.html',
    './assets/js/*.js',
  ],
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        blue: colors.blue,
        purple: colors.purple,
        gray: {
          900: '#0f0f0f',
          800: '#1a1a1a',
          700: '#2a2a2a',
          600: '#3a3a3a',
          500: '#4a4a4a',
          400: '#6a6a6a',
          300: '#8a8a8a',
          200: '#aaaaaa',
          100: '#cacaca',
        },
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-in-out',
        'slide-up': 'slideUp 0.3s ease-out',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        slideUp: {
          '0%': { transform: 'translateY(10px)', opacity: '0' },
          '100%': { transform: 'translateY(0)', opacity: '1' },
        },
      },
    },
  },
  plugins: [],
};
</file>

<file path="db/schema/schema.sql">
-- 01_users.sql
CREATE TABLE Users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(255) UNIQUE NOT NULL,
    passkey_id VARCHAR(255),
    passphrase_hash VARCHAR(255),
    email VARCHAR(255),
    is_admin TINYINT(1) DEFAULT 0,
    is_banned TINYINT(1) DEFAULT 0,
    credit_balance INT DEFAULT 0,
    sort_preference ENUM('new', 'hot', 'rising', 'popular') DEFAULT 'new',
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    last_active_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX(username),
    INDEX(email)
);

-- 02_media.sql
CREATE TABLE Media (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) UNIQUE NOT NULL,
    description TEXT,
    cover_image VARCHAR(255),
    created_by INT,
    vote_score INT DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(created_at),
    INDEX(vote_score),
    INDEX(created_by)
);

-- 03_branches.sql
CREATE TABLE Branches (
    id INT AUTO_INCREMENT PRIMARY KEY,
    media_id INT,
    title VARCHAR(255),
    summary TEXT,
    branch_type ENUM('before', 'after', 'other'),
    source_type ENUM('book', 'show', 'movie', 'other'),
    cover_image VARCHAR(255),
    created_by INT,
    vote_score INT DEFAULT 0,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(media_id),
    INDEX(created_by),
    INDEX(created_at),
    INDEX(vote_score)
);

-- 04_segments.sql
CREATE TABLE Segments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    branch_id INT,
    title VARCHAR(255),
    markdown_body LONGTEXT,
    image_path VARCHAR(255),
    created_by INT,
    vote_score INT DEFAULT 0,
    order_index INT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(branch_id),
    INDEX(created_by),
    INDEX(order_index),
    INDEX(created_at),
    INDEX(vote_score)
);

-- 05_tags.sql
CREATE TABLE Tags (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) UNIQUE,
    is_genre TINYINT(1) DEFAULT 0,
    created_by INT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(name),
    INDEX(is_genre),
    INDEX(created_by)
);

CREATE TABLE Tag_Links (
    id INT AUTO_INCREMENT PRIMARY KEY,
    tag_id INT,
    target_type ENUM('media', 'branch', 'segment'),
    target_id INT,
    tagged_by INT,
    tagged_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    UNIQUE INDEX unique_tag_target (tag_id, target_type, target_id),
    INDEX(tag_id),
    INDEX(tagged_by)
);

-- 06_comments_votes.sql
CREATE TABLE Comments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    segment_id INT,
    user_id INT,
    body TEXT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_anonymous TINYINT(1) DEFAULT 0,
    INDEX(segment_id),
    INDEX(user_id),
    INDEX(created_at)
);

CREATE TABLE Votes (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    target_type ENUM('media', 'branch', 'segment'),
    target_id INT,
    vote_value TINYINT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(user_id),
    INDEX(target_type, target_id),
    INDEX(created_at)
);

-- 07_credits_logs.sql
CREATE TABLE Credits_Log (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    change_amount INT,
    reason VARCHAR(255),
    related_id INT,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(user_id),
    INDEX(created_at)
);

-- 08_admin_moderation.sql
CREATE TABLE Admin_Moderation (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT,
    ip_address VARCHAR(45),
    device_hash VARCHAR(255),
    action VARCHAR(255),
    reason TEXT,
    expires_at DATETIME,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX(user_id),
    INDEX(action),
    INDEX(created_at)
);
</file>

<file path=".gitignore">
# Node artifacts (if ever used locally)
node_modules/
package.json

# Tailwind generated CSS
output.css
*.min.css

# Apache/PHP log or session files
*.log
*.cache
*.session

# Editor or OS files
.DS_Store
*.swp

# Env
.env
.env.*

# Test data (can be regenerated)
test-data/

# User uploads
uploads/

# Logs
logs/

# Favicons and manifest
favicons/
site.webmanifest

# Genre test-data (if you prefer to regenerate)
test-data/genres.json
</file>

<file path=".repomixignore">
# Exclude generated output
output.css
repomix-output.xml

# Same ignores from .gitignore
node_modules/
package.json
package-lock.json
npm-debug.log
yarn-error.log
*.log
*.cache
*.session
.DS_Store
*.swp
# Env
.env
.env.*

# Test data
test-data/

# User uploads  
uploads/

# Logs
logs/

# Favicons and manifest
favicons/
site.webmanifest

# Genre test-data (if you prefer to regenerate)
test-data/genres.json
</file>

<file path="db.md">
ContinueThe.Quest Database Schema Documentation

This document outlines a comprehensive and scalable database schema for the ContinueThe.Quest platform. It clearly explains table structures, columns, interactions, sorting mechanisms, and optimization strategies for high-performance handling of large datasets.

General Database Design Principles

Scalability:

Use integer-based primary keys.

Index columns used frequently in WHERE clauses or JOINs.

Partition data logically (by user directories for file storage).

Performance:

Optimize queries with appropriate indexing.

Avoid redundant data; normalize where practical, but denormalize to optimize read-heavy operations.

Flexibility:

Use ENUM and flags judiciously for easily extendable features.

Ensure tagging systems and sorting preferences are modular and easily extendable.

Table Structure Overview

1. Users

Columns:

id: INT, auto-increment (PK)

username: VARCHAR, unique

passkey_id: VARCHAR, nullable (WebAuthn)

passphrase_hash: VARCHAR (fallback)

email: VARCHAR, optional

is_admin: TINYINT (0/1)

is_banned: TINYINT (0/1)

credit_balance: INT

sort_preference: ENUM ('new', 'hot', 'rising', 'popular'), default 'new'

created_at, last_active_at: DATETIME

Interactions:

Owns media, branches, segments, comments, tags.

Credits are awarded/deducted for interactions.

Sorting preferences are saved per user for consistent UX.

2. Media

Columns:

id: INT (PK)

title: VARCHAR, unique

description: TEXT

cover_image: VARCHAR

created_by: INT (FK: Users)

vote_score: INT (cached)

created_at: DATETIME

Interactions:

Has many branches.

Can be tagged extensively.

Sortable by votes, created date, recent activity.

3. Branches

Columns:

id: INT (PK)

media_id: INT (FK: Media)

title: VARCHAR

summary: TEXT

branch_type: ENUM ('before', 'after', 'other')

source_type: ENUM ('book', 'show', 'movie', 'other')

cover_image: VARCHAR

created_by: INT (FK: Users)

vote_score: INT (cached)

created_at: DATETIME

Interactions:

Has multiple segments.

Can be individually tagged.

Sortable by votes, recency, activity.

4. Segments

Columns:

id: INT (PK)

branch_id: INT (FK: Branches)

title: VARCHAR

markdown_body: LONGTEXT (stored as file on disk)

image_path: VARCHAR, optional

created_by: INT

vote_score: INT (cached)

order_index: INT

created_at: DATETIME

Interactions:

Each segment has markdown text stored separately to manage large content efficiently.

Sortable by index order, creation date, and votes.

5. Tags (Unified System)

Columns:

id: INT (PK)

name: VARCHAR, unique

is_genre: TINYINT

created_by: INT (NULL for admin)

created_at: DATETIME

Interactions:

Applied to media, branches, segments.

Tags marked as is_genre dynamically populate navigation.

Tags restricted per user to prevent spam; rewarded when creating novel tags.

6. Tag Links

Columns:

id: INT (PK)

tag_id: INT (FK: Tags)

target_type: ENUM ('media', 'branch', 'segment')

target_id: INT

tagged_by: INT (FK: Users)

tagged_at: DATETIME

Interactions:

Flexibly applies tags to various content types.

Ensures uniqueness per content-tag relationship.

7. Comments

Columns:

id: INT (PK)

segment_id: INT (FK: Segments)

user_id: INT (FK: Users)

body: TEXT

created_at: DATETIME

is_anonymous: TINYINT

Interactions:

User engagement via commenting on segments.

Sortable by recency, popularity (votes).

8. Votes

Columns:

id: INT (PK)

user_id: INT

target_type: ENUM ('media', 'branch', 'segment')

target_id: INT

vote_value: TINYINT

created_at: DATETIME

Interactions:

Drives visibility sorting (popular, hot).

9. Credits Log

Columns:

id: INT (PK)

user_id: INT

change_amount: INT

reason: VARCHAR

related_id: INT, optional

created_at: DATETIME

Interactions:

Tracks all credit changes per user.

10. Admin Moderation

Columns (Bans & Activity Logs):

id: INT (PK)

user_id: INT

ip_address: VARCHAR

device_hash: VARCHAR

action: VARCHAR

reason: TEXT

expires_at: DATETIME (for bans)

created_at: DATETIME

Interactions:

Ensures platform integrity, security, and moderation capability.

Sorting & Scalability Techniques

Sorting Options:

All tables and queries support flexible sorting (votes, recent activity, creation date).

Cache frequently updated counts (vote_score) to optimize sorting.

Scalability Practices:

Index frequently queried columns: foreign keys, dates, vote counts.

Limit joins; prefer caching and denormalization where performance-critical.

Use filesystem-based storage segmented per user to efficiently track quotas and optimize file retrieval.

Additional Recommendations

Partition large tables based on date (created_at) or other logical factors to enhance query performance.

Implement automated archiving strategies for historical data.

Consider read replicas for scaling read-heavy operations.
</file>

<file path="index.php">
<?php
require_once __DIR__ . '/bootstrap.php';
?>
<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ContinueThe.Quest - Collaborative Storytelling</title>
    <link href="output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        #content { min-height: calc(100vh - 4rem); }
        .menu-transition { transition: transform 0.3s ease-in-out; }
    </style>
	<link rel="manifest" href="/site.webmanifest">
<link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
<meta name="theme-color" content="#3a3a3a">

</head>
<body class="bg-gray-900 text-gray-100 antialiased">

<!-- Header -->
<header class="bg-gray-800/50 backdrop-blur-sm border-b border-gray-700 sticky top-0 z-50">
    <div class="container mx-auto px-4 h-16 flex items-center justify-between">
        <!-- Logo/Brand -->
        <div class="flex items-center gap-4">
            <button id="menu-toggle" class="lg:hidden p-2 hover:bg-gray-700 rounded-lg transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
            <a href="/" class="text-xl font-semibold text-blue-400 hover:text-blue-300 transition-colors">
                ContinueThe<span class="text-gray-400">.</span>Quest
            </a>
        </div>
        
        <!-- Desktop Nav -->
        <nav class="hidden lg:flex items-center gap-6">
            <a href="?page=home" class="nav-link text-gray-300 hover:text-white transition-colors">Home</a>
            <div class="relative group">
                <button class="text-gray-300 hover:text-white transition-colors flex items-center gap-1">
                    Genres
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                    </svg>
                </button>
                <div class="absolute top-full left-0 mt-2 w-48 bg-gray-800 rounded-lg shadow-xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200">
                    <div id="genre-menu" class="py-2">
                        <!-- Populated by JS from DB -->
                    </div>
                </div>
            </div>
            <a href="?page=browse" class="nav-link text-gray-300 hover:text-white transition-colors">Browse</a>
            <a href="?page=about" class="nav-link text-gray-300 hover:text-white transition-colors">About</a>
            <a href="?page=faq" class="nav-link text-gray-300 hover:text-white transition-colors">FAQ</a>
            <a href="?page=contact" class="nav-link text-gray-300 hover:text-white transition-colors">Contact</a>
        </nav>
        
        <!-- Right Actions -->
        <div class="flex items-center gap-4">
            <button class="p-2 hover:bg-gray-700 rounded-lg transition-colors" title="Search">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </button>
            <button id="theme-toggle" class="p-2 hover:bg-gray-700 rounded-lg transition-colors" title="Toggle theme">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
                </svg>
            </button>
        </div>
    </div>
</header>

    
<!-- Mobile Menu -->
<div id="mobile-menu" class="fixed inset-y-0 left-0 w-64 bg-gray-800 z-40 transform -translate-x-full menu-transition lg:hidden">
    <div class="p-4 border-b border-gray-700">
        <button id="menu-close" class="p-2 hover:bg-gray-700 rounded-lg transition-colors float-right">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
            </svg>
        </button>
        <div class="text-lg font-semibold text-blue-400">Menu</div>
    </div>
    <nav class="p-4 space-y-2">
        <a href="?page=home" class="block px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors">Home</a>
        <div class="px-3 py-2">
            <div class="text-sm font-medium text-gray-400 mb-2">Genres</div>
            <div id="mobile-genre-menu" class="space-y-1 ml-3">
                <!-- Populated by JS -->
            </div>
        </div>
        <a href="?page=browse" class="block px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors">Browse</a>
        <a href="?page=about" class="block px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors">About</a>
        <a href="?page=faq" class="block px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors">FAQ</a>
        <a href="?page=contact" class="block px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors">Contact</a>
        
        <div class="border-t border-gray-700 mt-4 pt-4">
            <div class="text-sm font-medium text-gray-400 mb-2 px-3">Legal</div>
            <a href="?page=terms" class="block px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors">Terms of Service</a>
            <a href="?page=privacy" class="block px-3 py-2 rounded-lg hover:bg-gray-700 transition-colors">Privacy Policy</a>
        </div>
    </nav>
</div>

<!-- Mobile Menu Overlay -->
<div id="menu-overlay" class="fixed inset-0 bg-black/50 z-30 hidden lg:hidden"></div>
    
    <!-- Main Content -->
    <main id="content" class="container mx-auto px-4 py-8">
        <!-- Content loaded here dynamically -->
    </main>
    
    <!-- Footer -->
<!-- Footer -->
<footer class="bg-gray-800/50 border-t border-gray-700 py-8 mt-16">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8">
            <div>
                <h3 class="text-lg font-semibold mb-4">About</h3>
                <ul class="space-y-2">
                    <li><a href="?page=about" class="text-gray-400 hover:text-blue-400 transition-colors">Our Mission</a></li>
                    <li><a href="?page=faq" class="text-gray-400 hover:text-blue-400 transition-colors">FAQ</a></li>
                    <li><a href="?page=contact" class="text-gray-400 hover:text-blue-400 transition-colors">Contact Us</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-4">Explore</h3>
                <ul class="space-y-2">
                    <li><a href="?page=browse" class="text-gray-400 hover:text-blue-400 transition-colors">Browse Stories</a></li>
                    <li><a href="?page=home" class="text-gray-400 hover:text-blue-400 transition-colors">Home</a></li>
                </ul>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-4">Legal</h3>
                <ul class="space-y-2">
                    <li><a href="?page=terms" class="text-gray-400 hover:text-blue-400 transition-colors">Terms of Service</a></li>
                    <li><a href="?page=privacy" class="text-gray-400 hover:text-blue-400 transition-colors">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
        <div class="border-t border-gray-700 pt-6 text-center text-gray-400">
            <p>&copy; 2025 ContinueThe.Quest. All rights reserved.</p>
        </div>
    </div>
</footer>
    
    <!-- Core Scripts -->
    <script src="assets/js/core.js"></script>
    <script src="assets/js/router.js"></script>
</body>
</file>

<file path="input.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    /* Dark mode colors */
    :root {
        --color-primary: theme('colors.blue.600');
        --color-secondary: theme('colors.purple.600');
    }
    
    /* Smooth scrolling */
    html {
        scroll-behavior: smooth;
    }
    
    /* Custom scrollbar for dark theme */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }
    
    ::-webkit-scrollbar-track {
        @apply bg-gray-900;
    }
    
    ::-webkit-scrollbar-thumb {
        @apply bg-gray-700 rounded;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        @apply bg-gray-600;
    }
    
    /* Light mode styles */
    html:not(.dark) {
        background-color: #f9fafb;
        color: #1f2937;
    }
    
    html:not(.dark) body {
        background-color: #f9fafb;
        color: #1f2937;
    }
    
    /* Light mode header and footer */
    html:not(.dark) header,
    html:not(.dark) footer {
        @apply bg-white/80 backdrop-blur-sm border-gray-200 text-gray-800;
    }
    
    /* Light mode buttons */
    html:not(.dark) .nav-link {
        @apply text-gray-700 hover:text-gray-900;
    }
    
    /* Light mode cards and content areas */
    html:not(.dark) .bg-gray-800\/30,
    html:not(.dark) .bg-gray-800\/50 {
        @apply bg-white border-gray-200;
    }
    
    /* Light mode text */
    html:not(.dark) .text-gray-300,
    html:not(.dark) .text-gray-400 {
        @apply text-gray-600;
    }
    
    /* Custom scrollbar for light theme */
    html:not(.dark) ::-webkit-scrollbar-track {
        background-color: #f9fafb;
    }
    
    html:not(.dark) ::-webkit-scrollbar-thumb {
        background-color: #d1d5db;
    }
    
    html:not(.dark) ::-webkit-scrollbar-thumb:hover {
        background-color: #9ca3af;
    }
}

@layer components {
    /* Reusable button styles */
    .btn-primary {
        @apply px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-all transform hover:scale-105;
    }
    
    .btn-secondary {
        @apply px-6 py-3 bg-gray-800 hover:bg-gray-700 rounded-lg font-medium transition-all;
    }
    
    /* Light mode buttons */
    html:not(.dark) .btn-secondary {
        @apply bg-gray-200 hover:bg-gray-300 text-gray-800;
    }
    
    /* Card styles */
    .card {
        @apply bg-gray-800/30 rounded-lg p-6 border border-gray-700 hover:border-gray-600 transition-all;
    }
    
    /* Light mode cards */
    html:not(.dark) .card {
        @apply bg-white border-gray-200 hover:border-gray-300 shadow-sm;
    }
    
    /* Form inputs */
    .form-input {
        @apply w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent focus:outline-none transition-all;
    }
    
    /* Light mode form inputs */
    html:not(.dark) .form-input {
        @apply bg-white border-gray-300 text-gray-800;
    }
}

@layer utilities {
    /* Animation utilities */
    .animate-float {
        animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
    }
}
</file>

<file path="project.md">
ContinueThe.Quest Project Documentation

Project Overview

ContinueThe.Quest is a collaborative storytelling platform that allows users and AI to expand and continue unfinished stories or universes from various media sources such as TV shows, movies, books, and games. Users can add original media, create story branches, write or generate content segments, and interact through comments, votes, and tags. The goal is to foster a dynamic community-driven environment that scales efficiently and is highly performant.

Tech Stack

Backend: PHP (Fast, procedural programming style)

Frontend: Vanilla JavaScript, Tailwind CSS

Database: MariaDB

Storage: File-system based for large textual content and user assets

Authentication: WebAuthn (Passkey-first), with fallback passphrase

Project Goals

Facilitate easy collaboration on unfinished or alternate story universes.

Maintain high-performance and scalability to accommodate large-scale user-generated content.

Provide flexible and intuitive tagging, sorting, and navigation systems.

Foster a strong community with incentivized interactions and clear credit systems.

Ensure robust moderation tools for platform security and integrity.

Core Functionality

User Authentication

Passkey-first authentication (WebAuthn)

Optional fallback passphrase login

Robust account recovery and moderation capabilities

Media Creation

Users create media entries, providing a title, description, and cover image.

Media entries act as containers for story branches.

Tags are applied for categorization and enhanced discoverability.

Story Branches

Within media entries, users can create multiple narrative branches.

Branches can specify if they are before, after, or alternate to existing stories.

Each branch holds segments, representing chapters or narrative sections.

Content Segments

Individual segments are Markdown-based textual content stored on disk for efficient retrieval.

Each segment can include an optional cover image.

Supports both user-generated and AI-assisted content creation.

Tagging System

Unified tagging system used across media, branches, and segments.

Special tags flagged by admins (is_genre) automatically populate navigation and site content.

Users can add new tags with limitations to prevent spam, incentivizing valuable tagging.

Community Interaction

Users can comment, vote, and engage with media, branches, and segments.

User interactions generate credit awards, incentivizing participation.

Flexible sorting options (new, hot, popular, rising) applied throughout the site, with user preference saving.

Credit System

Credits tracked and logged for all user actions.

Credit spending required for certain actions (e.g., AI-assisted content).

Moderation and Admin Tools

Comprehensive moderation including banning, throttling, and activity monitoring.

Admin dashboard for content and user management.

Project Structure

/
├── assets
│   ├── js
│   └── css
├── admin
│   ├── assets
│   │   ├── js
│   │   └── css
│   ├── dashboard.php
│   └── moderation.php
├── uploads
│   └── users
│       └── <user_id>
│           ├── avatars
│           ├── images
│           └── texts
├── includes
│   ├── auth.php
│   ├── database.php
│   └── utils.php
├── db
│   └── schema
│       ├── 01_users.sql
│       ├── 02_media.sql
│       ├── 03_branches.sql
│       ├── 04_segments.sql
│       ├── 05_tags.sql
│       ├── 06_comments_votes.sql
│       ├── 07_credits_logs.sql
│       └── 08_admin_moderation.sql
├── index.php
├── login.php
└── project.md (this document)

Scalability and Performance

Filesystem-based user-specific directories ensure efficient disk quota tracking and rapid file retrieval.

Indexing strategies for MariaDB to optimize queries (votes, tags, timestamps).

Caching strategies employed for frequently accessed data (e.g., vote scores).

Partitioning of large tables recommended for scaling (date-based or logical segmentation).

Future Enhancements

Payment integration for premium features

Advanced AI generation capabilities

Rich analytics for user engagement and content performance

Expanded social and interactive features to further foster community growth
</file>

</files>
